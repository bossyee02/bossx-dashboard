<!-- ===== Running Text Harga Crypto (Binance API) ===== -->
<style>
  .crypto-ticker {
    position: relative;
    overflow: hidden;
    background: #0f1115;
    border-top: 1px solid rgba(245, 197, 66, 0.25);
    border-bottom: 1px solid rgba(245, 197, 66, 0.25);
    padding: 8px 0;
    width: 100%;
    z-index: 1000;
  }
  .ticker-track {
    display: inline-block;
    white-space: nowrap;
    animation: ticker-scroll 25s linear infinite;
    padding-left: 100%;
  }
  .ticker-item {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    margin-right: 32px;
    color: #eaeaea;
    font-size: 14px;
    font-weight: 500;
  }
  .ticker-label {
    color: #FFD700;
    font-weight: 700;
    letter-spacing: 0.5px;
  }
  .ticker-sep {
    opacity: 0.5;
    margin: 0 4px;
  }
  .price-up { color: #00c853; }
  .price-down { color: #ff3d00; }
  @keyframes ticker-scroll {
    0% { transform: translateX(0); }
    100% { transform: translateX(-50%); }
  }
  @media (max-width: 768px) {
    .ticker-item { margin-right: 20px; font-size: 13px; }
  }
</style>

<div class="crypto-ticker">
  <div class="ticker-track" id="cryptoTicker">Loading prices...</div>
</div>

<script>
  // Konfigurasi
  const REFRESH_INTERVAL = 10000; // 10 detik
  const SYMBOLS = ['BTCUSDT', 'ETHUSDT', 'SOLUSDT', 'TRXUSDT', 'TRUMPUSDT'];
  const BOSSX_PRICE = 1.00; // Harga tetap BOSSX

  // Ambil data dari Binance API
  async function fetchPrices() {
    try {
      const response = await fetch('https://api.binance.com/api/v3/ticker/24hr');
      const data = await response.json();
      const prices = {};

      SYMBOLS.forEach(symbol => {
        const item = data.find(d => d.symbol === symbol);
        if (item) {
          prices[symbol] = {
            price: parseFloat(item.lastPrice),
            change: parseFloat(item.priceChangePercent)
          };
        } else {
          prices[symbol] = { price: 0, change: 0 };
        }
      });

      return prices;
    } catch (error) {
      console.warn('Gagal ambil data harga:', error);
      return {};
    }
  }

  // Format harga
  function formatPrice(price) {
    if (price >= 1000) {
      return price.toLocaleString('en-US', { maximumFractionDigits: 2 });
    } else if (price >= 1) {
      return price.toFixed(2);
    } else {
      return price.toFixed(4);
    }
  }

  // Format persentase
  function formatChange(change) {
    return `${change >= 0 ? '+' : ''}${change.toFixed(2)}%`;
  }

  // Buat item ticker
  function createTickerItem(label, price, change, isBossX = false) {
    const priceClass = isBossX ? '' : (change >= 0 ? 'price-up' : 'price-down');
    const formattedPrice = isBossX ? price.toFixed(2) : formatPrice(price);
    const formattedChange = isBossX ? '' : ` <span class="${priceClass}">${formatChange(change)}</span>`;

    return `
      <span class="ticker-item">
        <span class="ticker-label">${label}</span>
        <span class="ticker-sep">â€¢</span>
        <span class="${priceClass}">${formattedPrice} USDT</span>
        ${formattedChange}
      </span>
    `;
  }

  // Bangun konten ticker
  function buildTicker(prices) {
    let content = '';

    // Tambahkan BOSSX di awal
    content += createTickerItem('BOSSX/USDT', BOSSX_PRICE, 0, true);

    // Tambahkan pasangan lainnya
    SYMBOLS.forEach(symbol => {
      const pair = symbol.replace('USDT', '/USDT');
      const data = prices[symbol] || { price: 0, change: 0 };
      content += createTickerItem(pair, data.price, data.change);
    });

    // Duplikat konten untuk animasi scroll tanpa jeda
    return content + content;
  }

  // Update ticker
  async function updateTicker() {
    const prices = await fetchPrices();
    const tickerElement = document.getElementById('cryptoTicker');
    if (tickerElement) {
      tickerElement.innerHTML = buildTicker(prices);
    }
  }

  // Jalankan pertama kali
  updateTicker();

  // Update otomatis setiap 10 detik
  setInterval(updateTicker, REFRESH_INTERVAL);
</script>
<!-- ===== End Running Text ===== -->
