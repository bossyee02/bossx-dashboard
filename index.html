<script>
const REFRESH_MS = 10000; // refresh tiap 10 detik
const BOSSX_PRICE = 1; // fixed
const SYMBOLS = ['BTCUSDT','ETHUSDT','SOLUSDT','TRXUSDT','TRUMPUSDT'];

async function fetchBinance24h() {
  const url = 'https://api.binance.com/api/v3/ticker/24hr';
  const res = await fetch(url);
  const data = await res.json();
  const out = {};
  SYMBOLS.forEach(sym => {
    const found = data.find(item => item.symbol === sym);
    out[sym] = found
      ? {
          price: parseFloat(found.lastPrice),
          change: parseFloat(found.priceChangePercent)
        }
      : { price: null, change: null };
  });
  return out;
}

function fmtUSDT(n) {
  if (n == null) return 'N/A';
  return n >= 1000
    ? n.toLocaleString('en-US', { maximumFractionDigits: 2 }) + ' USDT'
    : n.toLocaleString('en-US', { minimumFractionDigits: 4, maximumFractionDigits: 6 }) + ' USDT';
}

function fmtPct(n) {
  if (n == null || isNaN(n)) return '';
  const sign = n >= 0 ? '+' : '';
  return `${sign}${n.toFixed(2)}%`;
}

function bossxItem() {
  return `<span class="ticker-item"><span class="ticker-label">BOSSX/USDT</span> <span class="ticker-sep">•</span> 1 USDT</span>`;
}

function coinItem(label, data) {
  const cls = data.change >= 0 ? 'chg-up' : 'chg-down';
  return `<span class="ticker-item"><span class="ticker-label">${label}</span> <span class="ticker-sep">•</span> <span class="${cls}">${fmtUSDT(data.price)}</span> <span class="${cls}">${fmtPct(data.change)}</span></span>`;
}

function buildTicker(prices) {
  return `
    ${bossxItem()}
    ${coinItem('BTC/USDT', prices.BTCUSDT)}
    ${bossxItem()}
    ${coinItem('ETH/USDT', prices.ETHUSDT)}
    ${bossxItem()}
    ${coinItem('SOL/USDT', prices.SOLUSDT)}
    ${bossxItem()}
    ${coinItem('TRX/USDT', prices.TRXUSDT)}
    ${bossxItem()}
    ${coinItem('TRUMP/USDT', prices.TRUMPUSDT)}
  `;
}

async function refreshTicker() {
  const prices = await fetchBinance24h();
  document.getElementById('tickerTrack').innerHTML = buildTicker(prices) + buildTicker(prices);
}

refreshTicker();
setInterval(refreshTicker, REFRESH_MS);
</script>
